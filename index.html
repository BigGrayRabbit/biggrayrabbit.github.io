<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>平安S-100k/2020</title>
    <script src="echarts-en.common.min.js"></script>
</head>
<body>
    <div style="margin-bottom: 20px;width: 100%; height: 30px; border: 1px solid #8EC9EB; position: relative;">
        <div style="height: 100%; position: absolute; background-color: #9CDDFF; z-index: -1; width: 16.41779%;"></div>
        <div style="display: flex;justify-content: space-between; line-height: 30px; padding: 0 3px;">
            <span title="总进度">16.41779 %</span>
            <span title="总增益">-2.7 %</span><!--总资产/总投入-->
        </div>
    </div>
    <div id="line1" style="width: 100%; height: calc(30vh); min-height: 240px;"></div>
    <div id="bar" style="width: 100%; height: calc(30vh); min-height: 240px;"></div>
    <div id="line2" style="width: 100%; height: calc(30vh); min-height: 240px;"></div>

    <h4>MySQL Attendance</h4>
    <div style="border: 1px solid #4479a1;">
      <div style="position:relative;width: 14.6%; height: 20px; line-height: 20px; background-color: #4479a1; padding-left: 3px; color: #99CCFF;">
        <span style="position: absolute; width: 60px;">7 / 48</span>
      </div>
    </div>

    <script type="text/javascript">
        var monthX = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']
        var monthHead = [10.00513, 16.41779]
        var monthTail = [9.54867, 16.41779] // 这个数字假的，月底来改
        var monthIn = [10.00513, 6.86912]
        var monthGrowth = []
        for (let i = 0; i < monthHead.length; i++) {
            const rate = parseFloat(((monthTail[i]/monthHead[i]-1)*100).toFixed(3))
            monthGrowth.push(rate)
        }
        // console.log(monthGrowth)

        // 月底总资产值
        var line1 = echarts.init(document.getElementById('line1'))
        var line1Option = {
            color: ['#577ceb'],
            title: {
                text: 'Net'
            },
            // tooltip: {},
            tooltip: {
                trigger: 'axis'
            },
            xAxis: {
                data: monthX
            },
            yAxis: {
                type: 'value',
                min: 6,
                max: 30,
                axisLabel: {
                    formatter: '{value} k'
                }
            },
            series: [{
                name: '月底',
                type: 'line',
                data: monthTail
            }]

        }
        line1.setOption(line1Option)

        // 月初计从余利宝的流入
        var bar = echarts.init(document.getElementById('bar'))
        var barOption = {
            color: ['#E7BCF3'],
            title: {
                text: 'From YLB'
            },
            // tooltip: {},
            tooltip: {
                trigger: 'axis'
            },
            xAxis: {
                data: monthX
            },
            yAxis: {
                type: 'value',
                min: 6,
                max: 12,
                axisLabel: {
                    formatter: '{value} k'
                }
            },
            series: [{
                name: '流入',
                type: 'bar',
                data: monthIn
            }]
        }
        bar.setOption(barOption)

        // 单月增益率(月底比月初)
        var line2 = echarts.init(document.getElementById('line2'))
        var line2Option = {
            color: ['#9FE6B8', '#FB7293', '#ffd85c'],
            title: {
                text: 'Growth'
            },
            // tooltip: {},
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['月初', '月底', '增益率']
            },
            xAxis: {
                data: monthX
            },
            yAxis: [{
                type: 'value',
                min: 5,
                max: 30,
                position: 'left',
                axisLabel: {
                  formatter: '{value} k'
                }
              }, {
                type: 'value',
                min: -5,
                max: 20,
                position: 'right',
                axisLabel: {
                  formatter: '{value} %'
                }
              }
            ],
            series: [{
                name: '月初',
                type: 'bar',
                yAxisIndex: 0,
                data: monthHead
            }, {
                name: '月底',
                type: 'bar',
                yAxisIndex: 0,
                data: monthTail
            }, {
                name: '增益率',
                type: 'line',
                yAxisIndex: 1,
                data: monthGrowth
            }]
        }
        line2.setOption(line2Option)
    </script>
</body>
</html>